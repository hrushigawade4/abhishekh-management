<h2>ðŸ“‹ Combined Abhishek View</h2>

<div style="margin-bottom: 1rem;">
  <label style="font-weight: bold;">Filter by Abhishek Types:</label><br />
  {% for t in abhishek_types %}
    <label style="margin-right: 10px;">
      <input type="checkbox" class="type-filter" value="{{ t }}" checked /> {{ t }}
    </label>
  {% endfor %}
</div>


<table id="combinedTable" style="width: 100%; border-collapse: collapse;">
  <thead>
    <tr style="background-color: #f0f0f0;">
      <th style="padding: 8px;">Date</th>
      <th style="padding: 8px;">Name</th>
      <th style="padding: 8px;">Gotra</th>
      <th style="padding: 8px;">Mobile</th>
      <th style="padding: 8px;">Address</th>
      <th style="padding: 8px;">Abhishek Type</th>
    </tr>
  </thead>
  <tbody>
    {% for row in abhishek_data %}
    <tr data-type="{{ row.type }}">
      <td style="padding: 8px;">{{ row.date }}</td>
      <td style="padding: 8px;">{{ row.name }}</td>
      <td style="padding: 8px;">{{ row.gotra }}</td>
      <td style="padding: 8px;">{{ row.mobile }}</td>
      <td style="padding: 8px;">{{ row.address }}</td>
      <td style="padding: 8px;">{{ row.type }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<script>
document.querySelectorAll(".type-filter").forEach(cb => {
  cb.addEventListener("change", () => {
    const selected = Array.from(document.querySelectorAll(".type-filter:checked")).map(cb => cb.value.toLowerCase());
    const rows = document.querySelectorAll("#combinedTable tbody tr");

    rows.forEach(row => {
      const rowType = row.dataset.type.toLowerCase();
      row.style.display = selected.includes(rowType) ? "" : "none";
    });
  });
});
</script>
